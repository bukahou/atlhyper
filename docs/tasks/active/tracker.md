# ä»»åŠ¡è¿½è¸ª

> **æœ¬æ–‡ä»¶æ˜¯ä»»åŠ¡çŠ¶æ€çš„å”¯ä¸€æƒå¨æºã€‚**
> åªä¿ç•™ã€Œå¾…åŠã€å’Œã€Œè¿›è¡Œä¸­ã€çš„ä»»åŠ¡ã€‚å®Œæˆåå½’æ¡£åˆ° `docs/tasks/archive/`ã€‚
>
> çŠ¶æ€æ ‡è®°ï¼š`âœ…` å®Œæˆ / `ğŸ”„` è¿›è¡Œä¸­ / æ— æ ‡è®° = å¾…åŠ

---

## SLO 5xx ç›‘æ§ç›²åŒºä¿®å¤ â€” å¾…åŠ

> èƒŒæ™¯: geass-gateway æ•è·åç«¯ 504/502 å¼‚å¸¸åä»¥ HTTP 200 + error body è¿”å›ï¼Œ
> å¯¼è‡´ Linkerd/Traefik æ‰€æœ‰å±‚åªçœ‹åˆ° 200ï¼ŒSLO é¡µé¢æ— æ³•æ˜¾ç¤º 5xx é”™è¯¯ã€‚

### æ–¹æ¡ˆé€‰é¡¹ï¼ˆå¾…è¯„ä¼°ï¼‰

1. **æ¨èï¼šgateway é€ä¼  HTTP çŠ¶æ€ç ** â€” geass-gateway æ”¶åˆ° 5xx æ—¶åº”è¿”å› 502/504 è€Œé 200ï¼Œä½¿ Linkerd `response_total` èƒ½æ­£ç¡®è®°å½•é”™è¯¯
2. **å¤‡é€‰ï¼šé‡‡é›† Linkerd proxy error æŒ‡æ ‡** â€” é‡‡é›† `outbound_http_errors_total` ç­‰ proxy çº§åˆ«æŒ‡æ ‡ï¼Œè¦†ç›– TCP è¿æ¥å¤±è´¥å’Œ proxy è¶…æ—¶åœºæ™¯
3. **å¤‡é€‰ï¼šåº”ç”¨å±‚é”™è¯¯ç‡æŒ‡æ ‡** â€” åœ¨ gateway å†…éƒ¨æš´éœ² Prometheus æŒ‡æ ‡ï¼ŒæŒ‰å®é™…ä¸šåŠ¡é”™è¯¯ç‡ç»Ÿè®¡ï¼ˆä¸ä¾èµ– HTTP çŠ¶æ€ç ï¼‰

### ç›¸å…³å‘ç°

- Linkerd proxy ç”Ÿæˆçš„åˆæˆ 504ï¼ˆè¶…æ—¶ï¼‰ä¸å†™å…¥ `response_total`ï¼Œä»…è®°å½•åœ¨ proxy error æŒ‡æ ‡ä¸­
- CrashLoopBackOff æœåŠ¡çš„ inbound 5xx å…¨éƒ¨æ¥è‡ª K8s å¥åº·æ£€æŸ¥ï¼ˆ`route_name="probe"`ï¼‰ï¼Œè¢« SLO filter æ­£ç¡®è¿‡æ»¤
- æ–¹æ¡ˆ 1 éœ€è¦ä¿®æ”¹ geass é¡¹ç›®ï¼ˆé AtlHyperï¼‰ï¼Œæ–¹æ¡ˆ 2/3 éœ€è¦ä¿®æ”¹ AtlHyper Agent SLO ç®¡çº¿

> å·²å®Œæˆçš„ AIOps å¼•æ“ä»»åŠ¡å·²å½’æ¡£è‡³ `docs/tasks/archive/aiops-tasks.md`
