<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Tables - Atlantis Lite Bootstrap 4 Admin Dashboard</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="assets/img/icon.ico" type="image/x-icon"/>
	
	<!-- Fonts and icons -->
	<script src="assets/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Lato:300,400,700,900"]},
			custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['assets/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<style>
  /* 开关样式 */
  .switch {
    position: relative;
    display: inline-block;
    width: 46px;
    height: 24px;
  }

  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0;
    right: 0; bottom: 0;
    background-color: #ccc;
    transition: 0.4s;
    border-radius: 34px;
  }

  .slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.4s;
    border-radius: 50%;
  }

  input:checked + .slider {
    background-color: #4cd964; /* 绿色 */
  }

  input:checked + .slider:before {
    transform: translateX(22px);
  }
</style>
<style>
  .mail-to-input-group {
    display: flex;
    align-items: center;
    margin-bottom: 6px;
  }

  .mail-to-input-group input {
    flex: 1;
    border: none;
    box-shadow: none;
    background-color: transparent;
  }

  .mail-to-input-group button {
    margin-left: 4px;
    font-size: 16px;
    padding: 0 8px;
    height: 28px;
    line-height: 1;
  }
</style>

	<!-- CSS Files -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/atlantis.min.css">
	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
</head>
<body>
	<div id="app">
	<div class="wrapper">
	<div class="wrapper">
		<div class="main-header">
			
			<!-- 图表头 -->
			<div class="logo-header" data-background-color="blue">
				
				<a href="index.html" class="logo">
					<img src="assets/img/logo.svg" alt="navbar brand" class="navbar-brand">
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
						<i class="icon-menu"></i>
					</span>
				</button>
				<button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
				<div class="nav-toggle">
					<button class="btn btn-toggle toggle-sidebar">
						<i class="icon-menu"></i>
					</button>
				</div>
			</div>
			<!-- 图表底 -->
			
			<!-- 检索栏顶部 -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue2">
				
				<nav class="navbar navbar-header navbar-expand-lg py-1 px-3" data-background-color="blue2">
					<div class="text-white font-weight-bold">
						Kubernetes Dashboard - Real-time Cluster Overview
					</div>
				</nav>
			</nav>
			<!-- 检索栏顶部 -->
			
		</div>

		<!-- 导航栏顶部 -->
		<div class="sidebar sidebar-style-2">			
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<div class="user">
						<div class="avatar-sm float-left mr-2">
							<img src="assets/img/profile.jpg" alt="..." class="avatar-img rounded-circle">
						</div>
              <div class="info">
                <a data-toggle="collapse" href="#collapseUser" aria-expanded="true">
                  <span>
                    <span id="username-display">用户名</span>
                    <span class="user-level" id="role-display">权限等级</span>
                    <span class="caret"></span>
                  </span>
                </a>
                <div class="clearfix"></div>

                <div class="collapse in" id="collapseUser">
                  <ul class="nav">
                    <li>
                      <a href="#" id="logout-link">
                        <span class="link-collapse text-danger">退出登录</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
					</div>
					<ul class="nav nav-primary">
						<li class="nav-item active">
							<a data-toggle="collapse" href="#dashboard" class="collapsed" aria-expanded="false">
								<i class="fas fa-home"></i>
								<p>K8sDashboard</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="dashboard">
								<ul class="nav nav-collapse">
									<li>
										<a href="index.html">
											<span class="sub-item">K8sDashboard</span>
										</a>
									</li>

								</ul>
							</div>
						</li>
						<li class="nav-section">
							<span class="sidebar-mini-icon">
								<i class="fa fa-ellipsis-h"></i>
							</span>
							<h4 class="text-section">Components</h4>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#base">
								<i class="fas fa-layer-group"></i>
								<p>Monitoring</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="base">
								<ul class="nav nav-collapse">
									<li>
										<a href="Pod.html">
											<span class="sub-item">Pod</span>
										</a>
									</li>
									<li>
										<a href="node.html">
											<span class="sub-item">node</span>
										</a>
									</li>
									<li>
										<a href="service.html">
											<span class="sub-item">service</span>
										</a>
									</li>

									<li>
										<a href="namespace.html">
											<span class="sub-item">namespace</span>
										</a>
									</li>
									<li>
										<a href="ingress.html">
											<span class="sub-item">ingress</span>
										</a>
									</li>
									

									<li>
										<a href="deployment.html">
											<span class="sub-item">deployment</span>
										</a>
									</li>



								</ul>
							</div>
						</li>
							<li class="nav-item">
								<a data-toggle="collapse" href="#sidebarLayouts">
									<i class="fas fa-th-list"></i>
									<p>操作</p>
									<span class="caret"></span>
								</a>
								<div class="collapse" id="sidebarLayouts">
									<ul class="nav nav-collapse">
										<li>
											<a href="create.html">
												<span class="sub-item">资源创建</span>
											</a>
										</li>
										<li>
											<a href="user.html">
												<span class="sub-item">用户管理</span>
											</a>
										</li>
									</ul>
								</div>
							</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#forms">
								<i class="fas fa-pen-square"></i>
								<p>异常</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="forms">
								<ul class="nav nav-collapse">
									<li>
										<a href="eventlog.html">
											<span class="sub-item">集群异常日志</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a href="widgets.html">
								<i class="fas fa-desktop"></i>
								<p>卡片仓库</p>
								<span class="badge badge-success">4</span>
							</a>
						</li>

					</ul>
				</div>
			</div>
		</div>
		<!-- 导航栏底部 -->


		<div class="main-panel">
			<div class="content">
				<div class="page-inner">




					<!-- Card -->
					<!-- Describe -->
					<h4 class="page-title">监控系统配置</h4>
					<div class="row justify-content-center align-items-center mb-1">


<div class="col-md-4 pl-md-0">
  <div class="card card-pricing">
    <div class="card-header">
      <h4 class="card-title">Slack 告警配置</h4>
    </div>
    <div class="card-body">
      <ul class="specification-list">
        <li>
          <span class="name-specification">启用告警</span>
          <span class="status-specification">
            <label class="switch mt-1 mb-1">
              <input type="checkbox" id="slack-enable-switch">
              <span class="slider"></span>
            </label>
          </span>
        </li>		
        <li>
          <span class="name-specification">Webhook 地址</span>
          <span class="status-specification">
            <input id="slack-webhook-input" type="text"
              class="form-control form-control-sm mt-1 mb-1"
              style="border: none; box-shadow: none; background-color: transparent;"
              placeholder="请输入完整的 Slack Webhook URL">
          </span>
        </li>

      </ul>
    </div>
    <div class="card-footer">
      <button class="btn btn-primary btn-block" onclick="submitSlackConfig()">
        <b>保存配置</b>
      </button>
    </div>
  </div>
</div>





<div class="col-md-4">
  <div class="card card-pricing">
    <div class="card-header">
      <h4 class="card-title">📧 邮件告警配置</h4>
    </div>
    <div class="card-body">
      <ul class="specification-list">
        <li>
          <span class="name-specification">启用邮件告警</span>
          <span class="status-specification">
            <label class="switch mt-1 mb-1">
              <input type="checkbox" id="enable-mail-alert">
              <span class="slider"></span>
            </label>
          </span>
        </li>
        <li>
          <span class="name-specification">SMTP 用户名</span>
          <span class="status-specification">
            <input id="mail-username" type="text" class="form-control form-control-sm mt-1 mb-1"
              style="border: none; box-shadow: none; background-color: transparent;"
              placeholder="必须: 发件邮箱账号">
          </span>
        </li>
        <li>
          <span class="name-specification">SMTP 密码</span>
          <span class="status-specification">
            <input id="mail-password" type="password" class="form-control form-control-sm mt-1 mb-1"
              style="border: none; box-shadow: none; background-color: transparent;"
              placeholder="必须: 授权码或密码">
          </span>
        </li>
        <li>
          <span class="name-specification">发件人地址</span>
          <span class="status-specification">
            <input id="mail-from" type="text" class="form-control form-control-sm mt-1 mb-1"
              style="border: none; box-shadow: none; background-color: transparent;"
              placeholder="必须: 发件人邮箱">
          </span>
        </li>		
		<li>
		<span class="name-specification">收件人地址</span>
		<span class="status-specification">
			<div id="mail-to-list">
			<div class="mail-to-input-group">
				<input type="text" class="form-control form-control-sm mt-1 mb-1 mail-to-item" placeholder="示例: user@example.com">
				<button type="button" class="btn btn-success btn-sm" onclick="addMailToField()">＋</button>
			</div>
			</div>
		</span>
		</li>
      </ul>
    </div>
    <div class="card-footer">
      <button class="btn btn-primary btn-block" onclick="submitMailConfig()">
        <b>保存配置</b>
      </button>
    </div>
  </div>
</div>



<div class="col-md-4">
  <div class="card card-pricing">
    <div class="card-header">
      <h4 class="card-title">🚀 CI/CD Webhook 配置</h4>
    </div>
    <div class="card-body">
      <ul class="specification-list">
        <li>
          <span class="name-specification">启用 Webhook</span>
          <span class="status-specification">
            <label class="switch mt-1 mb-1">
              <input type="checkbox" id="enable-webhook">
              <span class="slider"></span>
            </label>
          </span>
        </li>
        <li>
          <span class="name-specification">Webhook 地址</span>
          <span class="status-specification">
            <input type="text" id="webhook-url"
              class="form-control form-control-sm mt-1 mb-1"
              style="border: none; background-color: transparent;" readonly
              value="/webhook/dockerhub">
          </span>
        </li>
      </ul>
    </div>
    <div class="card-footer">
      <button class="btn btn-primary btn-block" onclick="submitWebhookConfig()">
        <b>保存配置</b>
      </button>
    </div>
  </div>
</div>


				</div>
			</div>
		</div>
	</div>


</div>


	<!--   Core JS Files   -->
	   <script src="js/vue.min.js"></script>

	<script src="assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="assets/js/core/popper.min.js"></script>
	<script src="assets/js/core/bootstrap.min.js"></script>
	<!-- jQuery UI -->
	<script src="assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
	<!-- Datatables -->
	<script src="assets/js/plugin/datatables/datatables.min.js"></script>
	<!-- Atlantis JS -->
	<script src="assets/js/atlantis.min.js"></script>
	<!-- Atlantis DEMO methods, don't include it in your project! -->
	<script src="assets/js/setting-demo2.js"></script>

	<!-- 引入 API 配置与加载脚本 -->
  <script src="js/api_config.js"></script>
  <script src="js/user_info.js"></script>


<script>
  function addMailToField(value = "") {
    const container = document.getElementById("mail-to-list");

    const group = document.createElement("div");
    group.className = "mail-to-input-group";

    const input = document.createElement("input");
    input.type = "text";
    input.className = "form-control form-control-sm mt-1 mb-1 mail-to-item";
    input.placeholder = "示例: user@example.com";
    input.value = value;

    const removeBtn = document.createElement("button");
    removeBtn.className = "btn btn-danger btn-sm";
    removeBtn.innerText = "－";
    removeBtn.onclick = () => group.remove();

    group.appendChild(input);
    group.appendChild(removeBtn);
    container.appendChild(group);
  }

  // 🔁 用于初始化加载收件人列表
  function setMailToList(addresses) {
    const container = document.getElementById("mail-to-list");
    container.innerHTML = ""; // 清空现有
    if (!addresses || addresses.length === 0) {
      addMailToField(); // 添加空行
    } else {
      addresses.forEach(addr => addMailToField(addr));
    }
  }

  // 🔄 获取所有收件人（用于保存）
  function getMailToList() {
    return Array.from(document.getElementsByClassName("mail-to-item"))
      .map(input => input.value.trim())
      .filter(val => val !== "");
  }
</script>

<!-- <script>
new Vue({
  el: "#app",
  data: {
    node: {},
  },
  created() {
    const urlParams = new URLSearchParams(window.location.search);
    const nodeName = urlParams.get('name');
    if (!nodeName) {
      alert("未提供节点名称参数 ?name=xxx");
      return;
    }
    fetch(API_ENDPOINTS.node.getByName(nodeName))
      .then(res => res.json())
      .then(data => {
        this.node = data;
      })
      .catch(err => {
        console.error("获取 Node 详情失败:", err);
        alert("无法加载节点信息，请稍后再试。");
      });
  },
  methods: {
    getInternalIP(addresses) {
      const addr = addresses.find(a => a.type === 'InternalIP');
      return addr ? addr.address : 'N/A';
    },
    getHostname(addresses) {
      const addr = addresses.find(a => a.type === 'Hostname');
      return addr ? addr.address : 'N/A';
    },
    getCondition(type) {
      const cond = this.node.status.conditions.find(c => c.type === type);
      return cond ? cond.status : 'N/A';
    },
    formatMemory(k8sMemoryStr) {
      if (!k8sMemoryStr) return 'N/A';
      const match = k8sMemoryStr.match(/(\d+)([A-Za-z]+)/);
      if (!match) return k8sMemoryStr;
      const value = parseInt(match[1], 10);
      const unit = match[2];
      const unitMap = {
        Ki: 1024,
        Mi: 1024 * 1024,
        Gi: 1024 * 1024 * 1024
      };
      const bytes = value * (unitMap[unit] || 1);
      return (bytes / 1024 / 1024 / 1024).toFixed(1);
    },
    formatImageSize(sizeBytes) {
      if (!sizeBytes) return 'N/A';
      return (sizeBytes / 1024 / 1024).toFixed(1) + ' MB';
    }
  }
});
</script> -->




</body>
</html>