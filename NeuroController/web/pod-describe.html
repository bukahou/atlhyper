<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Tables - Atlantis Lite Bootstrap 4 Admin Dashboard</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="assets/img/icon.ico" type="image/x-icon"/>
	
	<!-- Fonts and icons -->
	<script src="assets/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Lato:300,400,700,900"]},
			custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['assets/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/atlantis.min.css">
	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
</head>
<body>
	<div id="app">
	<div class="wrapper">
	<div class="wrapper">
		<div class="main-header">
			
			<!-- å›¾è¡¨å¤´ -->
			<div class="logo-header" data-background-color="blue">
				
				<a href="index.html" class="logo">
					<img src="assets/img/logo.svg" alt="navbar brand" class="navbar-brand">
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
						<i class="icon-menu"></i>
					</span>
				</button>
				<button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
				<div class="nav-toggle">
					<button class="btn btn-toggle toggle-sidebar">
						<i class="icon-menu"></i>
					</button>
				</div>
			</div>
			<!-- å›¾è¡¨åº• -->
			
			<!-- æ£€ç´¢æ é¡¶éƒ¨ -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue2">
				
				<nav class="navbar navbar-header navbar-expand-lg py-1 px-3" data-background-color="blue2">
					<div class="text-white font-weight-bold">
						Kubernetes æ§åˆ¶å° - é›†ç¾¤çŠ¶æ€å®æ—¶æ¦‚è§ˆ
					</div>
				</nav>
			</nav>
			<!-- æ£€ç´¢æ é¡¶éƒ¨ -->
			
		</div>

		<!-- å¯¼èˆªæ é¡¶éƒ¨ -->
		<div class="sidebar sidebar-style-2">			
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<div class="user">
						<div class="avatar-sm float-left mr-2">
							<img src="assets/img/profile.jpg" alt="..." class="avatar-img rounded-circle">
						</div>
						<div class="info">
							<a data-toggle="collapse" href="#collapseExample" aria-expanded="true">
								<span>
									Wuxiafeng
									<span class="user-level">æˆ‘çš„é›†ç¾¤</span>
									<span class="caret"></span>
								</span>
							</a>
							<div class="clearfix"></div>

							<div class="collapse in" id="collapseExample">
								<ul class="nav">
									<li>
										<a href="#profile">
											<span class="link-collapse">åˆ‡æ¢</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<ul class="nav nav-primary">
						<li class="nav-item active">
							<a data-toggle="collapse" href="#dashboard" class="collapsed" aria-expanded="false">
								<i class="fas fa-home"></i>
								<p>K8sDashboard</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="dashboard">
								<ul class="nav nav-collapse">
									<li>
										<a href="index.html">
											<span class="sub-item">K8sDashboard</span>
										</a>
									</li>

								</ul>
							</div>
						</li>
						<li class="nav-section">
							<span class="sidebar-mini-icon">
								<i class="fa fa-ellipsis-h"></i>
							</span>
							<h4 class="text-section">Components</h4>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#base">
								<i class="fas fa-layer-group"></i>
								<p>ç›‘æ§</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="base">
								<ul class="nav nav-collapse">
									<li>
										<a href="Pod.html">
											<span class="sub-item">Pod</span>
										</a>
									</li>
									<li>
										<a href="node.html">
											<span class="sub-item">node</span>
										</a>
									</li>
									<li>
										<a href="service.html">
											<span class="sub-item">service</span>
										</a>
									</li>

									<li>
										<a href="namespace.html">
											<span class="sub-item">namespace</span>
										</a>
									</li>
									<li>
										<a href="ingress.html">
											<span class="sub-item">ingress</span>
										</a>
									</li>
									

									<li>
										<a href="deployment.html">
											<span class="sub-item">deployment</span>
										</a>
									</li>



								</ul>
							</div>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#sidebarLayouts">
								<i class="fas fa-th-list"></i>
								<p>æ“ä½œ</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="sidebarLayouts">
								<ul class="nav nav-collapse">
									<li>
										<a href="create.html">
											<span class="sub-item">èµ„æºåˆ›å»º</span>
										</a>
									</li>

								</ul>
							</div>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#forms">
								<i class="fas fa-pen-square"></i>
								<p>å¼‚å¸¸</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="forms">
								<ul class="nav nav-collapse">
									<li>
										<a href="eventlog.html">
											<span class="sub-item">é›†ç¾¤å¼‚å¸¸æ—¥å¿—</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="nav-item">
							<a href="widgets.html">
								<i class="fas fa-desktop"></i>
								<p>å¡ç‰‡ä»“åº“</p>
								<span class="badge badge-success">4</span>
							</a>
						</li>

					</ul>
				</div>
			</div>
		</div>
		<!-- å¯¼èˆªæ åº•éƒ¨ -->


		<div class="main-panel">
			<div class="content">
				<div class="page-inner">




					<!-- Card -->
					<!-- Describe -->
					<h4 class="page-title">Pod Describe</h4>






				<!-- âœ… åŒ…è£¹æ‰€æœ‰ä¾èµ– pod çš„å±•ç¤ºåŒºåŸŸ -->
<div v-if="pod">
	<div class="row justify-content-center align-items-center mb-1">
		<!-- çŠ¶æ€æ¦‚è§ˆ -->
		<div class="col-md-4">
			<div class="card card-pricing">
				<div class="card-header"><h4 class="card-title">çŠ¶æ€æ¦‚è§ˆ</h4></div>
				<div class="card-body">
					<ul class="specification-list">
						<li><span class="name-specification">çŠ¶æ€</span><span class="status-specification">{{ pod.status.phase }}</span></li>
						<li><span class="name-specification">å¯åŠ¨æ—¶é—´</span><span class="status-specification">{{ pod.status.startTime }}</span></li>
						<li><span class="name-specification">é‡å¯æ¬¡æ•°</span><span class="status-specification">{{ pod.status.containerStatuses[0]?.restartCount || 0 }}</span></li>
						<li><span class="name-specification">QoS ç±»åˆ«</span><span class="status-specification">{{ pod.status.qosClass }}</span></li>
						<li><span class="name-specification">å½“å‰ CPU ä½¿ç”¨</span><span class="status-specification">{{ pod.usage?.cpu || "N/A" }}</span></li>
						<li><span class="name-specification">å½“å‰å†…å­˜ä½¿ç”¨</span><span class="status-specification">{{ pod.usage?.memory || "N/A" }}</span></li>
					</ul>
				</div>
			</div>
		</div>

		<!-- åŸºæœ¬ä¿¡æ¯ -->
		<div class="col-md-4">
			<div class="card card-pricing card-pricing-focus card-primary">
				<div class="card-header"><h4 class="card-title">åŸºæœ¬ä¿¡æ¯</h4></div>
				<div class="card-body">
					<ul class="specification-list">
						<li><span class="name-specification">åç§°</span><span class="status-specification">{{ pod.metadata.name }}</span></li>
						<li><span class="name-specification">å‘½åç©ºé—´</span><span class="status-specification">{{ pod.metadata.namespace }}</span></li>
						<li><span class="name-specification">IP</span><span class="status-specification">{{ pod.status.podIP }}</span></li>
						<li><span class="name-specification">æ‰€å±èŠ‚ç‚¹</span><span class="status-specification">{{ pod.spec.nodeName }}</span></li>
					</ul>
				</div>
			</div>
		</div>

		<!-- å®¹å™¨ä¿¡æ¯ -->
		<div class="col-md-4">
			<div class="card card-pricing">
				<div class="card-header"><h4 class="card-title">å®¹å™¨ä¿¡æ¯</h4></div>
				<div class="card-body">
					<ul class="specification-list">
						<li><span class="name-specification">å®¹å™¨åç§°</span><span class="status-specification">{{ pod.spec.containers[0]?.name || "-" }}</span></li>
						<li><span class="name-specification">é•œåƒ</span><span class="status-specification">{{ pod.spec.containers[0]?.image || "-" }}</span></li>
						<li><span class="name-specification">ç«¯å£</span>
							<span class="status-specification">
								{{ pod.spec.containers[0]?.ports?.[0]?.containerPort || "-" }} / {{ pod.spec.containers[0]?.ports?.[0]?.protocol || "-" }}
							</span>
						</li>
						<li><span class="name-specification">CPU é™åˆ¶</span><span class="status-specification">{{ pod.spec.containers[0]?.resources?.limits?.cpu || "-" }}</span></li>
						<li><span class="name-specification">å†…å­˜é™åˆ¶</span><span class="status-specification">{{ pod.spec.containers[0]?.resources?.limits?.memory || "-" }}</span></li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!-- Pod çŠ¶æ€æ¡ä»¶ -->
	<div class="row mt-4">
		<div class="col-md-6">
			<div class="card">
				<div class="card-header"><h4 class="card-title">Pod çŠ¶æ€æ¡ä»¶</h4></div>
				<div class="card-body">
					<div class="table-responsive">
						<table class="display table table-striped table-hover">
							<thead><tr><th>ç±»å‹</th><th>çŠ¶æ€</th><th>å˜æ›´æ—¶é—´</th></tr></thead>
							<tbody>
								<tr v-for="cond in pod.status.conditions || []">
									<td>{{ cond.type }}</td>
									<td>{{ cond.status }}</td>
									<td>{{ cond.lastTransitionTime }}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<!-- Service ä¿¡æ¯ -->
		<div class="col-md-6">
			<div class="card">
				<div class="card-header"><h4 class="card-title">Service åŸºæœ¬ä¿¡æ¯</h4></div>
				<div class="card-body">
					<div class="table-responsive">
						<table class="display table table-striped table-hover">
							<thead><tr><th>å­—æ®µå</th><th>å€¼</th></tr></thead>
							<tbody>
								<tr><td>ç±»å‹</td><td>{{ pod.service?.spec?.type || "N/A" }}</td></tr>
								<tr><td>Cluster IP</td><td>{{ pod.service?.spec?.clusterIP || "N/A" }}</td></tr>
								<tr><td>æœåŠ¡ç«¯å£</td><td>{{ pod.service?.spec?.ports?.[0]?.port || "N/A" }}</td></tr>
								<tr>
									<td>å®¹å™¨ç«¯å£</td>
									<td>
										{{ typeof pod.service?.spec?.ports?.[0]?.targetPort === 'number'
											? pod.service.spec.ports[0].targetPort
											: (pod.service?.spec?.ports?.[0]?.targetPort || "-") }}
									</td>
								</tr>
								<tr><td>ç«¯å£åç§°</td><td>{{ pod.service?.spec?.ports?.[0]?.name || "-" }}</td></tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- äº‹ä»¶ä¿¡æ¯ -->
	<div class="row mt-4">
		<div class="col-md-12">
			<div class="card">
				<div class="card-header"><h4 class="card-title">ç›¸å…³äº‹ä»¶</h4></div>
				<div class="card-body">
					<div class="table-responsive">
						<table class="display table table-striped table-hover">
							<thead><tr><th>ç±»å‹</th><th>åŸå› </th><th>æ¶ˆæ¯</th><th>æ—¶é—´</th></tr></thead>
							<tbody>
								<template v-if="events.length > 0">
									<tr v-for="e in events" :key="e.metadata?.uid || e.message">
										<td>{{ e.type }}</td>
										<td>{{ e.reason }}</td>
										<td style="max-width: 400px; word-break: break-all;">{{ e.message }}</td>
										<td>{{ e.lastTimestamp || e.eventTime }}</td>
									</tr>
								</template>
								<template v-else>
									<tr>
										<td class="text-muted text-center" colspan="4">æš‚æ— äº‹ä»¶</td>
									</tr>
								</template>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Pod æ—¥å¿— -->
	<div class="row mt-4">
		<div class="col-md-12">
			<div class="card full-height">
				<div class="card-header d-flex justify-content-between align-items-center">
					<div class="card-title">ğŸ“„ Pod å†…æ—¥å¿—</div>
					<button class="btn btn-sm btn-outline-secondary" onclick="copyLogs()">å¤åˆ¶</button>
				</div>
				<div class="card-body" style="max-height: 500px; overflow-y: auto;">
<pre id="log-output"
      v-text="pod.logs || 'ï¼ˆæ— æ—¥å¿—å†…å®¹ï¼‰'"
      style="font-family: monospace; font-size: 13px; white-space: pre-wrap;"></pre>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- åŠ è½½ä¸­ / é”™è¯¯æç¤º -->
<div v-else-if="loading" class="text-center mt-4 text-muted">â³ æ­£åœ¨åŠ è½½ Pod ä¿¡æ¯...</div>
<div v-else-if="error" class="text-center mt-4 text-danger font-weight-bold">{{ error }}</div>










				
			</div>
		</div>
	</div>


</div>


	<!--   Core JS Files   -->
	   <script src="js/vue.min.js"></script>

	<script src="assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="assets/js/core/popper.min.js"></script>
	<script src="assets/js/core/bootstrap.min.js"></script>
	<!-- jQuery UI -->
	<script src="assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
	<!-- Datatables -->
	<script src="assets/js/plugin/datatables/datatables.min.js"></script>
	<!-- Atlantis JS -->
	<script src="assets/js/atlantis.min.js"></script>
	<!-- Atlantis DEMO methods, don't include it in your project! -->
	<script src="assets/js/setting-demo2.js"></script>

	<!-- å¼•å…¥ API é…ç½®ä¸åŠ è½½è„šæœ¬ -->
<script src="js/api_config.js"></script>


<script>
const app = new Vue({
	el: "#app",
	data: {
		pod: null,
		events: [],
		error: null,
		loading: true,
	},
	created() {
		const urlParams = new URLSearchParams(window.location.search);
		const namespace = urlParams.get("namespace");
		const podName = urlParams.get("name");

		if (!namespace || !podName) {
			this.error = "âŒ ç¼ºå°‘å¿…è¦å‚æ•° namespace / name";
			this.loading = false;
			return;
		}

		// âœ… è·å– Pod è¯¦æƒ…ä¿¡æ¯ï¼ˆåŒ…å«çŠ¶æ€ã€äº‹ä»¶ã€èµ„æºä½¿ç”¨ã€æ—¥å¿—ã€Serviceï¼‰
		const describeUrl = API_ENDPOINTS.pod.describe(namespace, podName);
		fetch(describeUrl)
			.then(res => res.json())
			.then(data => {
				this.pod = data.pod;
				this.pod.usage = data.usage || {};
				this.pod.service = data.service || null;
				this.pod.logs = data.logs || "ï¼ˆæ— æ—¥å¿—å†…å®¹ï¼‰";  // âœ… æ—¥å¿—å†…å®¹ç»‘å®šåˆ° pod.logs
				this.events = data.events || [];
			})
			.catch(err => {
				console.error("âŒ è·å– Pod è¯¦æƒ…å¤±è´¥", err);
				this.error = "âŒ è·å–æ•°æ®å¤±è´¥ï¼š" + err.message;
			})
			.finally(() => {
				this.loading = false;
			});
	}
});

// âœ… å¤åˆ¶æŒ‰é’®é€»è¾‘ï¼ˆç›´æ¥ä» Vue å®ä¾‹ä¸­è¯»å–æ—¥å¿—å†…å®¹ï¼‰
function copyLogs() {
	const logs = app?.$data?.pod?.logs;
	if (!logs) {
		alert("âŒ æ—¥å¿—ä¸ºç©ºï¼Œæ— æ³•å¤åˆ¶");
		return;
	}

	const textarea = document.createElement("textarea");
	textarea.value = logs;
	document.body.appendChild(textarea);
	textarea.select();

	try {
		document.execCommand("copy");
		alert("ğŸ“‹ æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
	} catch (err) {
		alert("âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶");
	}
	document.body.removeChild(textarea);
}
</script>




<!-- <script>
new Vue({
	el: "#app",
	data: {
		pod: null,
		events: [],
		error: null,
		loading: true,
	},
	created() {
		const urlParams = new URLSearchParams(window.location.search);
		const namespace = urlParams.get("namespace");
		const podName = urlParams.get("name");

		if (!namespace || !podName) {
			this.error = "âŒ ç¼ºå°‘å¿…è¦å‚æ•° namespace / name";
			this.loading = false;
			return;
		}

		// âœ… è·å– Pod è¯¦æƒ…ä¿¡æ¯ï¼ˆçŠ¶æ€ + äº‹ä»¶ + èµ„æºï¼‰
		const describeUrl = API_ENDPOINTS.pod.describe(namespace, podName);
		fetch(describeUrl)
			.then(res => res.json())
			.then(data => {
				this.pod = data.pod;
				this.pod.usage = data.usage || {};
				this.pod.service = data.service || null;
				this.events = data.events || [];
			})
			.catch(err => {
				console.error("âŒ è·å– Pod è¯¦æƒ…å¤±è´¥", err);
				this.error = "âŒ è·å–æ•°æ®å¤±è´¥ï¼š" + err.message;
			})
			.finally(() => {
				this.loading = false;
			});
	},
	mounted() {
		// âœ… è·å–æ—¥å¿—å†…å®¹ï¼ˆæ”¾ mounted ä¿è¯ DOM æ¸²æŸ“å®Œæˆï¼‰
		const urlParams = new URLSearchParams(window.location.search);
		const namespace = urlParams.get("namespace");
		const podName = urlParams.get("name");

		if (!namespace || !podName) return;

		const logUrl = API_ENDPOINTS.pod.logs(namespace, podName);
		fetch(logUrl)
			.then(res => res.text())
			.then(text => {
				const el = document.getElementById("log-output");
				if (el) {
					el.textContent = text || "ï¼ˆæ— æ—¥å¿—å†…å®¹ï¼‰";
				}
			})
			.catch(err => {
				console.error("âŒ åŠ è½½æ—¥å¿—å¤±è´¥", err);
				const el = document.getElementById("log-output");
				if (el) {
					el.textContent = "âŒ åŠ è½½æ—¥å¿—å¤±è´¥ï¼š" + err.message;
				}
			});
	}
});

// âœ… å¤åˆ¶æŒ‰é’®é€»è¾‘
function copyLogs() {
	const pre = document.getElementById("log-output");
	if (!pre) return;

	const range = document.createRange();
	range.selectNodeContents(pre);
	const selection = window.getSelection();
	selection.removeAllRanges();
	selection.addRange(range);

	try {
		document.execCommand("copy");
		alert("ğŸ“‹ æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
	} catch (err) {
		alert("âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶");
	}
	selection.removeAllRanges();
}
</script> -->




</body>
</html>