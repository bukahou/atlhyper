# 测试代码位置记录

> 这些代码用于开发阶段验证权限控制机制，功能开发完成后需要删除或迁移。

## 需要删除的测试代码

### 1. 测试 API 文件
- **文件**: `src/api/test.ts`
- **说明**: 包含测试不同权限级别的 API 调用函数
- **操作**: 功能完成后整个文件删除

### 2. Sidebar 测试区域
- **文件**: `src/components/navigation/Sidebar.tsx`
- **位置**:
  - 第 21-24 行: 测试相关图标导入
  - 第 28 行: 测试 API 导入
  - 第 83-164 行: `TestSection` 组件定义
  - 第 275-276 行: `<TestSection />` 组件使用
- **操作**: 删除上述代码块

## 需要保留但可能调整的代码

### 1. 请求拦截器权限处理
- **文件**: `src/api/request.ts`
- **位置**: 第 15-43 行（AuthError 类型和事件管理器）、第 86-114 行（响应拦截器权限处理）
- **说明**: 这是正式的权限错误处理逻辑，需要保留
- **操作**: 保留，后续可能根据需求调整

### 2. 权限错误处理 Hook
- **文件**: `src/hooks/useAuthError.ts`
- **说明**: 全局权限错误监听 Hook
- **操作**: 保留，后续实装鉴权时使用

### 3. Layout 中的权限监听
- **文件**: `src/components/layout/Layout.tsx`
- **位置**: 第 8 行 import、第 19 行 useAuthError 调用
- **说明**: 全局权限错误监听
- **操作**: 保留

## 后端鉴权启用步骤

当功能开发完成需要启用鉴权时：

1. **后端**: 修改 `atlhyper_master/server/api/register.go`
   - 取消注释鉴权中间件
   - 将接口移动到对应权限组

2. **前端**:
   - 删除本文档中标记为"需要删除"的测试代码
   - 测试权限错误处理流程是否正常工作

## 权限级别说明

| 级别 | 常量 | 说明 |
|------|------|------|
| Viewer | 1 | 只读权限，可查看所有数据 |
| Operator | 2 | 操作权限，可执行 Pod 重启等操作 |
| Admin | 3 | 管理员权限，可管理用户和系统配置 |
