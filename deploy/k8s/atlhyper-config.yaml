# ============================================
# AtlHyper 统一配置管理
# ============================================

apiVersion: v1
kind: Namespace
metadata:
  name: atlhyper
  labels:
    app.kubernetes.io/name: atlhyper

---
# ============================================
# ConfigMap - 非敏感配置
# ============================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: atlhyper-config
  namespace: atlhyper
data:
  # === 集群配置 ===
  CLUSTER_ID: "your-cluster-id"

  # === 服务发现 ===
  AGENT_API_BASE_URL: "http://atlhyper-controller:8081"
  AGENT_SVC_NAME: "atlhyper-agent-service"
  NEXT_PUBLIC_API_URL: "https://your-api-domain.com"

  # === Metrics 路径配置 ===
  PROC_ROOT: "/hostproc"
  SYS_ROOT: "/hostsys"
  ROOT_PATH: "/host_root"

  # === 功能开关 ===
  ENABLE_EMAIL_ALERT: "false"
  ENABLE_SLACK_ALERT: "false"
  ENABLE_WEBHOOK_SERVER: "false"

  # === 邮件配置（非敏感） ===
  MAIL_USERNAME: "your-email@example.com"
  MAIL_FROM: "your-email@example.com"
  MAIL_TO: "admin@example.com"

  # === 管理员配置（非敏感） ===
  DEFAULT_ADMIN_USERNAME: "admin"
  DEFAULT_ADMIN_DISPLAY_NAME: "Administrator"
  DEFAULT_ADMIN_EMAIL: "admin@atlhyper.com"

---
# ============================================
# Secret - 敏感信息
# ============================================
# !! 重要安全警告 !!
# 以下所有值都是占位符，必须在部署前修改为实际值
# 使用默认值部署会导致严重安全风险
# ============================================
apiVersion: v1
kind: Secret
metadata:
  name: atlhyper-secret
  namespace: atlhyper
type: Opaque
stringData:
  # === 管理员密码 ===
  # 必须修改！建议使用 16+ 字符的强密码
  DEFAULT_ADMIN_PASSWORD: "<CHANGE_THIS_SECURE_PASSWORD>"

  # === 邮件密码（如不使用可保留占位符） ===
  MAIL_PASSWORD: "<YOUR_MAIL_APP_PASSWORD>"

  # === Slack Webhook（如不使用可保留占位符） ===
  SLACK_WEBHOOK_URL: "<YOUR_SLACK_WEBHOOK_URL>"

  # === JWT 密钥 ===
  # 必须修改！建议使用 32+ 字符的随机字符串
  # 生成命令: openssl rand -base64 32
  JWT_SECRET: "<CHANGE_THIS_RANDOM_JWT_SECRET_MIN_32_CHARS>"
